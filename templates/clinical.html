
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Cancer Care - Oncologist Dashboard</title>
    <style>
         * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2c3e50;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .icon {
            width: 24px;
            height: 24px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
            align-items: start;
        }
        
        .sidebar {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: sticky;
            top: 20px;
        }
        
        .nav-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
        }
        
        .nav-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .content-area {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 600px;
        }
        
        .feature-section {
            display: none;
        }
        
        .feature-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #2c3e50;
        }
        
        /* Patient Data Form */
        .patient-form {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #495057;
        }
        
        .form-group input, .form-group select {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .predict-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .predict-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .predict-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* Results Display */
        .results-container {
            display: none;
            margin-top: 30px;
        }
        
        .results-container.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .staging-result {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stage-info h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .survival-display {
            text-align: center;
            position: relative;
        }
        
        .survival-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(#ffffff 0deg, #ffffff var(--percentage), rgba(255,255,255,0.3) var(--percentage));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .prediction-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .prediction-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .prediction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .prediction-label {
            font-weight: 600;
            color: #6c757d;
            margin-bottom: 10px;
        }
        
        .prediction-score {
            font-size: 2rem;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 15px;
        }
        
        .confidence-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 0.8s ease;
        }
        
        .biomarker-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .biomarker-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
        }
        
        .biomarker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .biomarker-title {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .biomarker-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-positive {
            background: #d4edda;
            color: #155724;
        }
        
        .status-negative {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <h1>
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/>
                    <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/>
                </svg>
                AI Cancer Care Platform
            </h1>
            <p>Advanced Clinical Decision Support for Oncology</p>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="nav-item active" onclick="showSection('staging')">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 14h.01M12 11h.01M15 11h.01M12 8h.01M15 8h.01"/>
                        <path d="M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5Z"/>
                    </svg>
                    TNM Staging & Prediction
                </div>
                <div class="nav-item" onclick="showSection('biomarkers')">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12l2 2 4-4"/>
                        <circle cx="12" cy="12" r="9"/>
                    </svg>
                    Biomarker Analysis
                </div>
                <div class="nav-item" onclick="showSection('trials')">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                    </svg>
                    Clinical Trials
                </div>
                <div class="nav-item" onclick="showSection('decisions')">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 3h12l4 6-10 13L2 9l4-6z"/>
                    </svg>
                    Decision Trees
                </div>
            </div>

            <div class="content-area">
                <!-- TNM Staging & Prediction -->
                <div id="staging" class="feature-section active">
                    <h2 class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 14h.01M12 11h.01M15 11h.01M12 8h.01M15 8h.01"/>
                            <path d="M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0-2-2H5a2 2 0 0 0-2-2V5a2 2 0 0 0 2-2H5Z"/>
                        </svg>
                        TNM Staging & Treatment Prediction
                    </h2>
                    
                    <div class="patient-form">
                        <h3 style="margin-bottom: 20px;">Patient Clinical Data</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="t-stage">T - Primary Tumor</label>
                                <select id="t-stage">
                                    <option value="">Select T Stage</option>
                                    <option value="T0">T0 - No evidence of primary tumor</option>
                                    <option value="Tis">Tis - Carcinoma in situ</option>
                                    <option value="T1">T1 - Tumor ≤ 2cm</option>
                                    <option value="T2">T2 - Tumor 2-5cm</option>
                                    <option value="T3">T3 - Tumor > 5cm</option>
                                    <option value="T4">T4 - Tumor with direct extension</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="n-stage">N - Regional Lymph Nodes</label>
                                <select id="n-stage">
                                    <option value="">Select N Stage</option>
                                    <option value="N0">N0 - No regional lymph node metastasis</option>
                                    <option value="N1">N1 - Metastasis to 1-3 lymph nodes</option>
                                    <option value="N2">N2 - Metastasis to 4-9 lymph nodes</option>
                                    <option value="N3">N3 - Metastasis to ≥10 lymph nodes</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="m-stage">M - Distant Metastasis</label>
                                <select id="m-stage">
                                    <option value="">Select M Stage</option>
                                    <option value="M0">M0 - No distant metastasis</option>
                                    <option value="M1">M1 - Distant metastasis present</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="patient-age">Patient Age</label>
                                <input type="number" id="patient-age" min="18" max="100" placeholder="Enter age">
                            </div>
                            
                            <div class="form-group">
                                <label for="tumor-grade">Tumor Grade</label>
                                <select id="tumor-grade">
                                    <option value="">Select Grade</option>
                                    <option value="1">Grade 1 - Well differentiated</option>
                                    <option value="2">Grade 2 - Moderately differentiated</option>
                                    <option value="3">Grade 3 - Poorly differentiated</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="ki67">Ki-67 Index (%)</label>
                                <input type="number" id="ki67" min="0" max="100" placeholder="Enter Ki-67 percentage">
                            </div>
                        </div>
                        
                        <h4 style="margin: 20px 0 15px 0;">Biomarker Status</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="er-status">ER Status</label>
                                <select id="er-status">
                                    <option value="">Select ER Status</option>
                                    <option value="positive">Positive</option>
                                    <option value="negative">Negative</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="pr-status">PR Status</label>
                                <select id="pr-status">
                                    <option value="">Select PR Status</option>
                                    <option value="positive">Positive</option>
                                    <option value="negative">Negative</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="her2-status">HER2 Status</label>
                                <select id="her2-status">
                                    <option value="">Select HER2 Status</option>
                                    <option value="positive">Positive</option>
                                    <option value="negative">Negative</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="predict-btn" onclick="runPredictions()">
                            Analyze Patient Data & Generate Predictions
                        </button>
                    </div>
                    
                    <div class="error-message" id="error-message"></div>
                    
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p>Running AI analysis...</p>
                    </div>
                    
                    <div class="results-container" id="results-container">
                        <div id="staging-result" class="staging-result">
                            <div class="stage-info">
                                <h3 id="stage-display">Stage</h3>
                                <p id="tnm-display">TNM Classification</p>
                                <p id="prognosis-display">Prognosis</p>
                            </div>
                            <div class="survival-display">
                                <div class="survival-circle" id="survival-circle">
                                    <span id="survival-rate">--%</span>
                                </div>
                                <p style="margin-top: 10px; font-size: 0.9rem;">5-Year Survival</p>
                            </div>
                        </div>
                        
                        <div class="prediction-cards" id="prediction-cards">
                            <!-- Prediction cards will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Biomarker Analysis -->
                <div id="biomarkers" class="feature-section">
                    <h2 class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 12l2 2 4-4"/>
                            <circle cx="12" cy="12" r="9"/>
                        </svg>
                        Biomarker Analysis & Recommendations
                    </h2>
                    
                    <div class="biomarker-grid" id="biomarker-results">
                        <p>Please run the TNM staging analysis first to see biomarker results.</p>
                    </div>
                </div>

                <!-- Clinical Trials -->
                <div id="trials" class="feature-section">
                    <h2 class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M2 12l10 5 10-5"/>
                        </svg>
                        Relevant Clinical Trials
                    </h2>
                    
                    <div id="trials-results">
                        <p>Clinical trials will be displayed here based on patient biomarker profile.</p>
                    </div>
                </div>

                <!-- Decision Trees -->
                <div id="decisions" class="feature-section">
                    <h2 class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 3h12l4 6-10 13L2 9l4-6z"/>
                        </svg>
                        Clinical Decision Trees
                    </h2>
                    
                    <div id="decision-tree-results">
                        <p>Decision trees will be generated based on patient data analysis.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

                <!-- Second Opinion Network -->
                <div id="network" class="feature-section">
                    <h2 class="section-title">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="m22 21-3-3m0 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"/>
                        </svg>
                        Second Opinion Network
                    </h2>
                    
                    <div class="network-grid">
                        <div class="network-card">
                            <div class="network-header">
                                <div class="network-logo">MSK</div>
                                <div>
                                    <div class="network-title">Memorial Sloan Kettering</div>
                                    <div class="network-specialty">Breast Cancer Center</div>
                                </div>
                            </div>
                            <div class="network-stats">
                                <div class="stat-item">
                                    <div class="stat-value">4.9</div>
                                    <div class="stat-label">Rating</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">2,847</div>
                                    <div class="stat-label">Cases/Year</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">96%</div>
                                    <div class="stat-label">Survival Rate</div>
                                </div>
                            </div>
                            <p style="color: #6c757d; margin: 15px 0; line-height: 1.5;">
                                Leading cancer center with specialized breast oncology team. Expert in complex cases and clinical trials.
                            </p>
                            <div class="action-buttons">
                                <button class="btn btn-primary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                                    </svg>
                                    Request Consult
                                </button>
                                <button class="btn btn-secondary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                        <polyline points="22,6 12,13 2,6"/>
                                    </svg>
                                    Send Records
                                </button>
                            </div>
                        </div>
                        
                        <div class="network-card">
                            <div class="network-header">
                                <div class="network-logo">MDA</div>
                                <div>
                                    <div class="network-title">MD Anderson Cancer Center</div>
                                    <div class="network-specialty">Oncology Specialists</div>
                                </div>
                            </div>
                            <div class="network-stats">
                                <div class="stat-item">
                                    <div class="stat-value">4.8</div>
                                    <div class="stat-label">Rating</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">3,201</div>
                                    <div class="stat-label">Cases/Year</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">95%</div>
                                    <div class="stat-label">Survival Rate</div>
                                </div>
                            </div>
                            <p style="color: #6c757d; margin: 15px 0; line-height: 1.5;">
                                Comprehensive cancer center with cutting-edge research and personalized treatment approaches.
                            </p>
                            <div class="action-buttons">
                                <button class="btn btn-primary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                                    </svg>
                                    Request Consult
                                </button>
                                <button class="btn btn-secondary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                                        <polyline points="15,3 21,3 21,9"/>
                                        <line x1="10" y1="14" x2="21" y2="3"/>
                                    </svg>
                                    View Profile
                                </button>
                            </div>
                        </div>
                        
                        <div class="network-card">
                            <div class="network-header">
                                <div class="network-logo">JHU</div>
                                <div>
                                    <div class="network-title">Johns Hopkins</div>
                                    <div class="network-specialty">Kimmel Cancer Center</div>
                                </div>
                            </div>
                            <div class="network-stats">
                                <div class="stat-item">
                                    <div class="stat-value">4.7</div>
                                    <div class="stat-label">Rating</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">2,156</div>
                                    <div class="stat-label">Cases/Year</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">94%</div>
                                    <div class="stat-label">Survival Rate</div>
                                </div>
                            </div>
                            <p style="color: #6c757d; margin: 15px 0; line-height: 1.5;">
                                World-renowned academic medical center with expertise in precision medicine and immunotherapy.
                            </p>
                            <div class="action-buttons">
                                <button class="btn btn-primary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M8 2v4"/>
                                        <path d="M16 2v4"/>
                                        <rect width="18" height="18" x="3" y="4" rx="2"/>
                                        <path d="M3 10h18"/>
                                    </svg>
                                    Schedule Meeting
                                </button>
                                <button class="btn btn-secondary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 16v-4"/>
                                        <path d="M12 8h.01"/>
                                    </svg>
                                    Get Info
                                </button>
                            </div>
                        </div>
                        
                        <div class="network-card">
                            <div class="network-header">
                                <div class="network-logo">SMC</div>
                                <div>
                                    <div class="network-title">Stanford Medicine</div>
                                    <div class="network-specialty">Cancer Institute</div>
                                </div>
                            </div>
                            <div class="network-stats">
                                <div class="stat-item">
                                    <div class="stat-value">4.6</div>
                                    <div class="stat-label">Rating</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">1,892</div>
                                    <div class="stat-label">Cases/Year</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">93%</div>
                                    <div class="stat-label">Survival Rate</div>
                                </div>
                            </div>
                            <p style="color: #6c757d; margin: 15px 0; line-height: 1.5;">
                                Innovation-focused cancer center with emphasis on breakthrough therapies and clinical trials.
                            </p>
                            <div class="action-buttons">
                                <button class="btn btn-primary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
                                        <circle cx="12" cy="13" r="3"/>
                                    </svg>
                                    Virtual Consult
                                </button>
                                <button class="btn btn-secondary">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                                        <line x1="4" y1="22" x2="4" y2="15"/>
                                    </svg>
                                    Clinical Trials
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-top: 30px;">
                        <h3 style="color: #2c3e50; margin-bottom: 20px;">Network Benefits</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div>
                                <h4 style="color: #495057; margin-bottom: 10px;">Access to Expertise</h4>
                                <p style="color: #6c757d;">Connect with leading oncologists and specialized cancer centers for complex cases.</p>
                            </div>
                            <div>
                                <h4 style="color: #495057; margin-bottom: 10px;">Clinical Trials</h4>
                                <p style="color: #6c757d;">Identify and refer patients to cutting-edge clinical trials and experimental treatments.</p>
                            </div>
                            <div>
                                <h4 style="color: #495057; margin-bottom: 10px;">Multidisciplinary Care</h4>
                                <p style="color: #6c757d;">Coordinate care across multiple specialties for comprehensive treatment planning.</p>
                            </div>
                            <div>
                                <h4 style="color: #495057; margin-bottom: 10px;">Quality Assurance</h4>
                                <p style="color: #6c757d;">Validate treatment decisions with peer review and evidence-based recommendations.</p>
                            </div>
                        </div>
                    </div>
                </div>
    <script>
        // Global variables
        let currentPatientData = {};
        const API_BASE_URL = 'http://172.17.88.192:5000/api'; 

        // Navigation functionality
        function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll('.feature-section').forEach(section => {
            section.classList.remove('active');
        });
        
        // Remove active class from all nav items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // Show selected section
        document.getElementById(sectionId).classList.add('active');
        
        // Add active class to clicked nav item
        event.target.closest('.nav-item').classList.add('active');
        }

        // Collect patient data from form
        function collectPatientData() {
        const data = {
            t_stage: document.getElementById('t-stage').value,
            n_stage: document.getElementById('n-stage').value,
            m_stage: document.getElementById('m-stage').value,
            age: parseInt(document.getElementById('patient-age').value),
            grade: parseInt(document.getElementById('tumor-grade').value),
            ki67: parseFloat(document.getElementById('ki67').value),
            er_positive: document.getElementById('er-status').value === 'positive',
            pr_positive: document.getElementById('pr-status').value === 'positive',
            her2_positive: document.getElementById('her2-status').value === 'positive',
            her2_negative: document.getElementById('her2-status').value === 'negative'
        };
        
        return data;
        }

        // Validate form data
        function validateFormData(data) {
        const requiredFields = ['t_stage', 'n_stage', 'm_stage', 'age', 'grade', 'ki67'];
        const missingFields = requiredFields.filter(field => !data[field] && data[field] !== 0);
        
        if (missingFields.length > 0) {
            return { valid: false, message: `Please fill in all required fields: ${missingFields.join(', ')}` };
        }
        
        if (data.age < 18 || data.age > 100) {
            return { valid: false, message: 'Age must be between 18 and 100' };
        }
        
        if (data.ki67 < 0 || data.ki67 > 100) {
            return { valid: false, message: 'Ki-67 index must be between 0 and 100' };
        }
        
        return { valid: true };
        }

        // Show error message
        function showError(message) {
        const errorDiv = document.getElementById('error-message');
        errorDiv.textContent = message;
        errorDiv.classList.add('show');
        setTimeout(() => {
            errorDiv.classList.remove('show');
        }, 5000);
        }

        // Show loading state
        function showLoading(show) {
        const loading = document.getElementById('loading');
        const predictBtn = document.querySelector('.predict-btn');
        
        if (show) {
            loading.classList.add('show');
            predictBtn.disabled = true;
            predictBtn.textContent = 'Analyzing...';
        } else {
            loading.classList.remove('show');
            predictBtn.disabled = false;
            predictBtn.textContent = 'Analyze Patient Data & Generate Predictions';
        }
        }

        // API call helper
        async function apiCall(endpoint, data) {
        const fullUrl = `${API_BASE_URL}${endpoint}`;
        console.log('Calling URL:', fullUrl);
        
        try {
            const response = await fetch(fullUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
                body: JSON.stringify(data)
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            return await response.json();
        } catch (error) {
            console.error('API call failed for:', fullUrl, error);
            throw error;
        }
    }

        // Display TNM staging results
        function displayStagingResults(data) {
        document.getElementById('stage-display').textContent = data.stage_name;
        document.getElementById('tnm-display').textContent = data.tnm_combination;
        document.getElementById('prognosis-display').textContent = data.prognosis;
        
        const survivalRate = data.survival_rate;
        document.getElementById('survival-rate').textContent = `${survivalRate}%`;
        
        // Update survival circle
        const circle = document.getElementById('survival-circle');
        circle.style.setProperty('--percentage', `${survivalRate * 3.6}deg`);
        
        // Show results container
        document.getElementById('results-container').style.display = 'block';
        }

        // Display treatment prediction results
        function displayTreatmentResults(data) {
        const cardsContainer = document.getElementById('prediction-cards');
        cardsContainer.innerHTML = '';
        
        const predictions = [
            { label: 'Chemotherapy Response', score: data.chemotherapy_response, color: '#28a745' },
            { label: 'Hormone Therapy Response', score: data.hormone_therapy_response, color: '#17a2b8' },
            { label: 'Targeted Therapy Response', score: data.targeted_therapy_response, color: '#ffc107' },
            { label: '5-Year Survival', score: data.five_year_survival, color: '#28a745' },
            { label: 'Recurrence Risk', score: data.recurrence_risk, color: '#dc3545' }
        ];
        
        predictions.forEach(pred => {
            const card = document.createElement('div');
            card.className = 'prediction-card';
            card.innerHTML = `
                <div class="prediction-label">${pred.label}</div>
                <div class="prediction-score" style="color: ${pred.color}">${pred.score}%</div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: ${pred.score}%; background: ${pred.color};"></div>
                </div>
            `;
            cardsContainer.appendChild(card);
        });
        }

        // Display biomarker analysis
        function displayBiomarkerResults(data) {
        const container = document.getElementById('biomarker-results');
        container.innerHTML = '';
        
        // Create biomarker cards
        const biomarkerCard = document.createElement('div');
        biomarkerCard.className = 'biomarker-card';
        biomarkerCard.innerHTML = `
            <h3>Biomarker Profile</h3>
            <div class="biomarker-grid">
                <div class="biomarker-item">
                    <span class="biomarker-label">ER Status:</span>
                    <span class="biomarker-value ${data.key_factors.er_positive ? 'positive' : 'negative'}">
                        ${data.key_factors.er_positive ? 'Positive' : 'Negative'}
                    </span>
                </div>
                <div class="biomarker-item">
                    <span class="biomarker-label">PR Status:</span>
                    <span class="biomarker-value ${data.key_factors.pr_positive ? 'positive' : 'negative'}">
                        ${data.key_factors.pr_positive ? 'Positive' : 'Negative'}
                    </span>
                </div>
                <div class="biomarker-item">
                    <span class="biomarker-label">HER2 Status:</span>
                    <span class="biomarker-value ${data.key_factors.her2_positive ? 'positive' : 'negative'}">
                        ${data.key_factors.her2_positive ? 'Positive' : 'Negative'}
                    </span>
                </div>
                <div class="biomarker-item">
                    <span class="biomarker-label">Ki-67 Index:</span>
                    <span class="biomarker-value">${data.key_factors.ki67_index}%</span>
                </div>
                <div class="biomarker-item">
                    <span class="biomarker-label">Patient Age:</span>
                    <span class="biomarker-value">${data.key_factors.patient_age} years</span>
                </div>
                <div class="biomarker-item">
                    <span class="biomarker-label">Tumor Stage:</span>
                    <span class="biomarker-value">Stage ${data.key_factors.tumor_stage}</span>
                </div>
            </div>
        `;
        container.appendChild(biomarkerCard);
        }

        // Display clinical trials
        function displayClinicalTrials(trials, subtype) {
        const container = document.getElementById('trials-results');
        container.innerHTML = `<h3>Relevant Clinical Trials for ${subtype}</h3>`;
        
        if (trials && trials.length > 0) {
            trials.forEach(trial => {
                const trialCard = document.createElement('div');
                trialCard.className = 'trial-card';
                trialCard.innerHTML = `
                    <h4>${trial.title}</h4>
                    <div class="trial-details">
                        <span class="trial-phase">${trial.phase}</span>
                        <span class="trial-status">${trial.enrollment}</span>
                        <span class="trial-location">${trial.location}</span>
                    </div>
                `;
                container.appendChild(trialCard);
            });
        } else {
            container.innerHTML += '<p>No active clinical trials found for this profile.</p>';
        }
        }

        // Display decision tree
        function displayDecisionTree(data) {
        const container = document.getElementById('decision-tree-results');
        container.innerHTML = '';
        
        // Patient summary
        const summaryCard = document.createElement('div');
        summaryCard.className = 'decision-card';
        summaryCard.innerHTML = `
            <h3>Patient Summary</h3>
            <div class="patient-summary">
                <p><strong>Stage:</strong> ${data.patient_summary.stage}</p>
                <p><strong>Hormone Receptor Status:</strong> ${data.patient_summary.hormone_receptor_status}</p>
                <p><strong>HER2 Status:</strong> ${data.patient_summary.her2_status}</p>
                <p><strong>Age:</strong> ${data.patient_summary.age} years</p>
            </div>
        `;
        container.appendChild(summaryCard);
        
        // Clinical decisions
        data.clinical_decisions.forEach((decision, index) => {
            const decisionCard = document.createElement('div');
            decisionCard.className = 'decision-card';
            
            if (decision.decision === 'Systemic Therapy') {
                let therapyHTML = `<h3>${decision.decision}</h3>`;
                decision.recommendations.forEach(rec => {
                    therapyHTML += `
                        <div class="therapy-recommendation">
                            <h4>${rec.therapy}</h4>
                            <p><strong>Recommendation:</strong> ${rec.recommendation}</p>
                            <p><strong>Drug:</strong> ${rec.drug}</p>
                            <p><strong>Duration:</strong> ${rec.duration}</p>
                            ${rec.monitoring ? `<p><strong>Monitoring:</strong> ${rec.monitoring}</p>` : ''}
                        </div>
                    `;
                });
                decisionCard.innerHTML = therapyHTML;
            } else {
                decisionCard.innerHTML = `
                    <h3>${decision.decision}</h3>
                    <p><strong>Recommendation:</strong> ${decision.recommendation}</p>
                    <p><strong>Rationale:</strong> ${decision.rationale}</p>
                    ${decision.alternatives ? `<p><strong>Alternatives:</strong> ${decision.alternatives.join(', ')}</p>` : ''}
                    ${decision.timeline ? `<p><strong>Timeline:</strong> ${decision.timeline}</p>` : ''}
                `;
            }
            
            container.appendChild(decisionCard);
        });
        }

        // Main prediction function
        async function runPredictions() {
        // Collect and validate data
        const patientData = collectPatientData();
        const validation = validateFormData(patientData);
        
        if (!validation.valid) {
            showError(validation.message);
            return;
        }
        
        // Store patient data globally
        currentPatientData = patientData;
        
        // Show loading state
        showLoading(true);
        
        try {
            // Call TNM staging prediction
            const stagingResult = await apiCall('/predict/tnm-staging', patientData);
            displayStagingResults(stagingResult);
            
            // Call treatment response prediction
            const treatmentData = {
                ...patientData,
                stage: stagingResult.predicted_stage
            };
            const treatmentResult = await apiCall('/predict/treatment-response', treatmentData);
            displayTreatmentResults(treatmentResult);
            displayBiomarkerResults(treatmentResult);
            
            // Call biomarker analysis for clinical trials
            const biomarkerData = {
                er_percent: patientData.er_positive ? 95 : 0,
                pr_percent: patientData.pr_positive ? 80 : 0,
                her2_score: patientData.her2_positive ? 3 : 1,
                her2_fish: patientData.her2_positive ? 2.5 : 1.2,
                ki67: patientData.ki67,
                grade: patientData.grade,
                postmenopausal: patientData.age >= 50
            };
            const biomarkerResult = await apiCall('/predict/biomarkers', biomarkerData);
            displayClinicalTrials(biomarkerResult.clinical_trials, biomarkerResult.molecular_subtype);
            
            // Call decision tree
            const decisionData = {
                stage: stagingResult.stage_name.replace('Stage ', ''),
                er_positive: patientData.er_positive,
                her2_positive: patientData.her2_positive,
                age: patientData.age,
                tumor_size: 3.0, // Default value
                high_risk: stagingResult.predicted_stage >= 3
            };
            const decisionResult = await apiCall('/decision-tree', decisionData);
            displayDecisionTree(decisionResult);
            
            showError('Analysis completed successfully!');
            
        } catch (error) {
            console.error('Prediction failed:', error);
            showError('Failed to run predictions. Please check your connection and try again.');
        } finally {
            showLoading(false);
        }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
        // Hide results container initially
        document.getElementById('results-container').style.display = 'none';
        
        // Set default values for demo
        document.getElementById('patient-age').value = '55';
        document.getElementById('ki67').value = '20';
        });
    </script>
</body>
</html>